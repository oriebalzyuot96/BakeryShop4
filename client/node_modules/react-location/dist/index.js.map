{"version":3,"file":"index.js","sources":["../node_modules/qss/dist/qss.mjs","../src/history.js","../src/utils.js","../src/index.js"],"sourcesContent":["export function encode(obj, pfx) {\n\tvar k, i, tmp, str='';\n\n\tfor (k in obj) {\n\t\tif ((tmp = obj[k]) !== void 0) {\n\t\t\tif (Array.isArray(tmp)) {\n\t\t\t\tfor (i=0; i < tmp.length; i++) {\n\t\t\t\t\tstr && (str += '&');\n\t\t\t\t\tstr += encodeURIComponent(k) + '=' + encodeURIComponent(tmp[i]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tstr && (str += '&');\n\t\t\t\tstr += encodeURIComponent(k) + '=' + encodeURIComponent(tmp);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn (pfx || '') + str;\n}\n\nfunction toValue(mix) {\n\tvar str = decodeURIComponent(mix);\n\tif (str === 'true') return true;\n\tif (str === 'false') return false;\n\treturn (+str * 0 === 0) ? (+str) : str;\n}\n\nexport function decode(str) {\n\tvar tmp, k, out={}, arr=str.split('&');\n\n\twhile (tmp = arr.shift()) {\n\t\ttmp = tmp.split('=');\n\t\tk = tmp.shift();\n\t\tif (out[k] !== void 0) {\n\t\t\tout[k] = [].concat(out[k], toValue(tmp.shift()));\n\t\t} else {\n\t\t\tout[k] = toValue(tmp.shift());\n\t\t}\n\t}\n\n\treturn out;\n}\n","// Most of these utilities have been respectfully\n// copied or modified from @reach/router by Ryan Florence\n// and their licenses have been included in this project.\n// Thanks Ryan!\n\nfunction getLocation(source) {\n  return {\n    ...source.location,\n    state: source.history.state,\n    id: (source.history.state && source.history.state.id) || 'initial',\n  }\n}\n\nexport function createHistory(source) {\n  let listeners = []\n  let location = getLocation(source)\n  let transitioning = false\n  let resolveTransition = () => {}\n\n  return {\n    get location() {\n      return location\n    },\n\n    get transitioning() {\n      return transitioning\n    },\n\n    _onTransitionComplete() {\n      transitioning = false\n      resolveTransition()\n    },\n\n    listen(listener) {\n      listeners.push(listener)\n\n      const popstateListener = () => {\n        location = getLocation(source)\n        listener({ location, action: 'POP' })\n      }\n\n      source.addEventListener('popstate', popstateListener)\n\n      return () => {\n        source.removeEventListener('popstate', popstateListener)\n        listeners = listeners.filter(fn => fn !== listener)\n      }\n    },\n\n    _navigate(to, { state, replace = false } = {}) {\n      state = { ...state, id: `${Date.now()}` }\n      // try...catch iOS Safari limits to 100 pushState calls\n      try {\n        if (transitioning || replace) {\n          source.history.replaceState(state, null, to)\n        } else {\n          source.history.pushState(state, null, to)\n        }\n      } catch (e) {\n        source.location[replace ? 'replace' : 'assign'](to)\n      }\n\n      location = getLocation(source)\n      transitioning = true\n      const transition = new Promise(resolve => {\n        resolveTransition = resolve\n      })\n      // setTimeout here to ensure that any unsubs have run before we try and notify them\n      setTimeout(() => {\n        listeners.forEach(listener => listener({ location, action: 'PUSH' }))\n      }, 1)\n      return transition\n    },\n  }\n}\n\nexport function createMemorySource(initialPathname = '/') {\n  let index = 0\n  const stack = [{ pathname: initialPathname, search: '', hash: '' }]\n  const states = []\n\n  return {\n    get location() {\n      return stack[index]\n    },\n    addEventListener() {},\n    removeEventListener() {},\n    history: {\n      get entries() {\n        return stack\n      },\n      get index() {\n        return index\n      },\n      get state() {\n        return states[index]\n      },\n      pushState(state, _, href) {\n        const [pathname, search = ''] = href.split('?')\n        const hash = pathname.includes('#')\n          ? pathname.split('#').reverse()[0]\n          : ''\n        index += 1\n        stack.push({ pathname, search, href, hash })\n        states.push(state)\n      },\n      replaceState(state, _, href) {\n        const [pathname, search = ''] = href.split('?')\n        const hash = pathname.includes('#')\n          ? pathname.split('#').reverse()[0]\n          : ''\n        stack[index] = { pathname, search, href, hash }\n        states[index] = state\n      },\n    },\n  }\n}\n","// Most of these utilities have been respectfully\n// copied or modified from @reach/router by Ryan Florence. Thanks Ryan!\nimport React from 'react'\n\nexport function trimSlashes(str) {\n  return str.replace(/(^\\/+|\\/+$)/g, '')\n}\n\nexport function resolve(to, base) {\n  to = String(to)\n  if (startsWith(to, '/')) {\n    return to\n  }\n\n  const toSegments = segmentize(to)\n  const baseSegments = segmentize(base)\n\n  if (toSegments[0] === '') {\n    return base\n  }\n\n  if (!startsWith(toSegments[0], '.')) {\n    const pathname = baseSegments.concat(toSegments).join('/')\n    return (base === '/' ? '' : '/') + pathname\n  }\n\n  const allSegments = baseSegments.concat(toSegments)\n\n  const segments = []\n\n  for (let i = 0, l = allSegments.length; i < l; i++) {\n    const segment = allSegments[i]\n    if (segment === '..') segments.pop()\n    else if (segment !== '.') segments.push(segment)\n  }\n\n  return `/${segments.join('/')}`\n}\n\nexport function isMatch(path, pathname) {\n  const pathSegments = segmentize(path)\n  const pathnameSegments = segmentize(pathname)\n\n  const isExact = pathSegments.length === pathnameSegments.length\n\n  let newBasePath = []\n  const params = {}\n\n  const isMatched = pathSegments.every((segment, i) => {\n    if (segment === pathnameSegments[i]) {\n      newBasePath[i] = pathnameSegments[i]\n      return true\n    }\n    if (startsWith(segment, ':') && pathnameSegments[i]) {\n      const paramName = trimLeading(segment, ':')\n      params[paramName] = pathnameSegments[i]\n      newBasePath[i] = pathnameSegments[i]\n      return true\n    }\n    return false\n  })\n\n  newBasePath = newBasePath.join('/')\n\n  return isMatched ? { params, newBasePath, isExact } : false\n}\n\nexport function startsWith(string, search) {\n  return string.substring(0, search.length) === search\n}\n\nexport function trimLeading(string, search) {\n  return string.substring(string.indexOf(search) + search.length)\n}\n\nexport function segmentize(uri) {\n  if (!uri) {\n    return []\n  }\n  return trimSlashes(uri).split('/')\n}\n\nexport function isModifiedEvent(e) {\n  return !!(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey)\n}\n\nexport function getResolvedBasepath(path, basepath) {\n  return path === '/'\n    ? basepath\n    : `${trimSlashes(basepath)}/${trimSlashes(path)}`\n}\n\nexport function useForceUpdate() {\n  const [_, setCount] = React.useState(0)\n  const mountedRef = React.useRef()\n\n  React.useEffect(() => {\n    mountedRef.current = true\n    return () => {\n      mountedRef.current = false\n    }\n  }, [])\n\n  return React.useCallback(() => {\n    if (mountedRef.current) {\n      setCount(old => old + 1)\n    }\n  }, [])\n}\n","/* eslint-disable no-nested-ternary */\n/* eslint-disable react/prop-types */\n/* eslint-disable no-console */\nimport React from 'react'\nimport * as qss from 'qss'\n\nimport { createHistory, createMemorySource } from './history'\nimport {\n  isModifiedEvent,\n  resolve,\n  isMatch as _isMatch,\n  startsWith,\n  getResolvedBasepath,\n  useForceUpdate,\n} from './utils'\n\n// Allow creation of custom historys including memory sources\nexport { createHistory, createMemorySource }\n\n// The shared context for everything\nconst context = React.createContext()\n\n// Detect if we're in the DOM\nconst isDOM = Boolean(\n  typeof window !== 'undefined' &&\n    window.document &&\n    window.document.createElement,\n)\n\n// This is the default history object if none is defined\nexport const globalHistory = createHistory(\n  isDOM ? window : createMemorySource(),\n)\n\nconst LocationRoot = ({\n  children,\n  history: userHistory,\n  basepath: userBasepath,\n}) => {\n  // If this is the first history, create it using the userHistory or browserHistory\n  const historyRef = React.useRef(userHistory || globalHistory)\n  const forceUpdate = useForceUpdate()\n\n  const history = historyRef.current\n\n  // Let's get at some of the nested data on the history object\n  let {\n    location: { pathname, hash: fullHash, search, state, id },\n    _onTransitionComplete,\n  } = history\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  state = React.useMemo(() => state, [JSON.stringify(state)])\n\n  // Get the hash without the bang\n  const hash = fullHash.split('#').reverse()[0]\n  // The default basepath for the entire Location\n  const basepath = userBasepath || '/'\n  // Parse the query params into an object\n  const query = React.useMemo(() => {\n    let query = qss.decode(search.substring(1))\n\n    // Try to parse any query params that might be json\n    Object.keys(query).forEach((key) => {\n      try {\n        query[key] = JSON.parse(query[key])\n      } catch (err) {\n        //\n      }\n    })\n\n    return query\n  }, [search])\n\n  // Start off with fresh params at the top level\n  const params = React.useMemo(() => ({}), [])\n\n  const href = pathname + (hash ? `#${hash}` : '') + search\n\n  // Build our context value\n  const contextValue = {\n    basepath,\n    pathname,\n    hash,\n    params,\n    query,\n    search,\n    state,\n    href,\n    id,\n    history,\n  }\n\n  const historyListenerRef = React.useRef()\n\n  // Subscribe to the history, even before the component mounts\n  if (!historyListenerRef.current) {\n    // Update this component any time history updates\n    historyListenerRef.current = history.listen(forceUpdate)\n  }\n\n  // Before the component unmounts, unsubscribe from the history\n  React.useEffect(() => {\n    return historyListenerRef.current\n  }, [])\n\n  // After component update, mark the transition as complete\n  React.useEffect(() => {\n    _onTransitionComplete()\n  })\n\n  return <context.Provider value={contextValue}>{children}</context.Provider>\n}\n\n// This is the main Location component that acts like a Provider\nexport const LocationProvider = ({ children, location, ...rest }) => {\n  if (location) {\n    return <context.Provider value={location}>{children}</context.Provider>\n  }\n  return <LocationRoot {...rest}>{children}</LocationRoot>\n}\n\n// This hook powers just about everything. It is also responsible for\n// creating the navigate() function based on the depth at which the hook is used\nexport const useLocation = () => {\n  const contextValue = React.useContext(context)\n  const forceUpdate = useForceUpdate()\n  const { query, state, history, basepath, pathname, params } = contextValue\n\n  // Make sure any components using this hook update when the\n  // history changes\n  React.useEffect(() => {\n    return history.listen(forceUpdate)\n  }, [forceUpdate, history])\n\n  const navigateRef = React.useRef()\n\n  navigateRef.current = {\n    history,\n    basepath,\n    query,\n    state,\n  }\n\n  // Make the navigate function\n  const navigate = React.useCallback(\n    (\n      to,\n      { query: queryUpdater, state: stateUpdater, replace, preview } = {},\n    ) => {\n      // Allow query params and state to be updated with a function\n      const resolvedQuery =\n        typeof queryUpdater === 'function'\n          ? queryUpdater(navigateRef.current.query)\n          : queryUpdater\n      const resolvedState =\n        typeof stateUpdater === 'function'\n          ? stateUpdater(navigateRef.current.state)\n          : stateUpdater\n\n      // If the query was updated, serialize all of the subkeys\n      if (resolvedQuery) {\n        Object.keys(resolvedQuery).forEach((key) => {\n          const val = resolvedQuery[key]\n          if (typeof val === 'object' && val !== 'null') {\n            resolvedQuery[key] = JSON.stringify(val)\n          }\n        })\n      }\n\n      // Then stringify the query params for URL encoding\n      const search = qss.encode(resolvedQuery, '?')\n\n      // Construct the final href for the navigation\n      const href =\n        resolve(\n          typeof to === 'function' ? to(params) : to,\n          navigateRef.current.basepath,\n        ) + (search === '?' ? '' : search)\n\n      // If this is a preview, just return the final href\n      if (preview) {\n        return href\n      }\n\n      // Otherwise, apply the navigation to the history\n      return navigateRef.current.history._navigate(href, {\n        state: resolvedState,\n        replace,\n      })\n    },\n    [],\n  )\n\n  const isMatch = React.useCallback(\n    (matchPath, from) =>\n      _isMatch(getResolvedBasepath(matchPath, from || basepath), pathname),\n    [basepath, pathname],\n  )\n\n  return {\n    ...contextValue,\n    navigate,\n    isMatch,\n  }\n}\n\nexport const Location = ({ children, render, ...rest }) => {\n  const location = useLocation(rest)\n\n  if (children) {\n    return children(location)\n  }\n\n  if (render) {\n    return render(location)\n  }\n\n  return null\n}\n\nexport const withLocation = (Comp) => {\n  return (props) => {\n    const location = useLocation()\n    return <Comp {...props} location={location} />\n  }\n}\n\n// MatchFirst returns the first matching child Match component or\n// any non-null non-Match component and renders only that component.\n// Comparable to React-Locations Swtich component\nexport const MatchFirst = ({ children }) => {\n  const matchFirstRef = React.useRef()\n\n  matchFirstRef.current = false\n\n  let comp\n\n  children = React.Children.toArray(children)\n  ;[...children.reverse()].forEach((child) => {\n    comp = child.type.__isMatch\n      ? React.cloneElement(child, {\n          ...child.props,\n          miss: comp,\n          exact: child.props.path === '/',\n        })\n      : child.type.__isRedirect\n      ? React.cloneElement(child, {\n          ...child.props,\n          miss: comp,\n        })\n      : child\n  })\n\n  return comp\n}\n\n// The Match component is used to match paths againts the location and\n// render content for that match\nexport const Match = ({\n  path,\n  routes,\n  children,\n  render,\n  component: Comp,\n  miss = null,\n  exact,\n  ...rest\n}) => {\n  // Use the location\n  const locationValue = useLocation()\n  const { params, isMatch } = locationValue\n\n  // See if the route is currently matched\n  let match = React.useMemo(() => isMatch(path), [isMatch, path])\n\n  let newBasePath\n\n  if (match) {\n    // If the route is a match, make sure we use\n    // the newBasePath from the match. It contains\n    // the interpolated path, free of route param\n    // identifiers\n    newBasePath = match.newBasePath\n  }\n\n  const newParams = React.useMemo(\n    () => ({\n      ...params,\n      ...(match ? match.params : {}),\n    }),\n    [match, params],\n  )\n\n  // Update the contex to use hte new basePath and params\n  const contextValue = React.useMemo(\n    () => ({\n      ...locationValue,\n      basepath: newBasePath,\n      params: newParams,\n    }),\n    [locationValue, newBasePath, newParams],\n  )\n\n  // Not a match? Return a miss\n  if (!match || (exact && !match.isExact)) {\n    return miss\n  }\n\n  const renderProps = {\n    ...contextValue,\n    ...contextValue.params,\n  }\n\n  // Support the render prop\n  if (render) {\n    children = render(renderProps)\n  }\n\n  // Support the component prop\n  if (Comp) {\n    children = <Comp {...renderProps} {...rest} />\n  }\n\n  // Support child as a function\n  if (typeof children === 'function') {\n    children = children(renderProps)\n  }\n\n  // Support just children\n  return <context.Provider value={contextValue}>{children}</context.Provider>\n}\n\nMatch.__isMatch = true\n\n// The Match component is used to match paths againts the location and\n// render content for that match\nexport const Redirect = ({\n  from,\n  to,\n  query,\n  state,\n  replace = true,\n  miss = null,\n}) => {\n  // Use the location\n  const locationValue = useLocation()\n  const { pathname, navigate, isMatch } = locationValue\n\n  // See if the route is currently matched\n  let match = React.useMemo(() => !from || isMatch(from), [from, isMatch])\n\n  if (match && from === '/' && !match.isExact) {\n    match = false\n  }\n\n  React.useLayoutEffect(() => {\n    if (match) {\n      navigate(to, { query, state, replace })\n    }\n  }, [match, navigate])\n\n  if (match) {\n    return null\n  }\n\n  return miss\n}\n\nRedirect.__isRedirect = true\n\nexport function Link({\n  to,\n  query,\n  replace,\n  state,\n  onClick,\n  target,\n  style = {},\n  className = '',\n  getActiveProps = () => ({}),\n  activeType,\n  children,\n  ...rest\n}) {\n  // Use the useLocation hook\n  const location = useLocation()\n  const { navigate, pathname, href } = location\n\n  // If this `to` is an external URL, make a normal a href\n  if (typeof to === 'string') {\n    try {\n      const link = new URL(to)\n      return (\n        <a\n          href={link.href}\n          target={target}\n          style={style}\n          className={className}\n          {...rest}\n        >\n          {children}\n        </a>\n      )\n    } catch (e) {\n      // if a path is not parsable by URL its a local relative path.\n      // Proceed\n    }\n  }\n\n  // Get the preview href for this link and its variations\n  const linkHrefWithQuery = navigate(to, {\n    query,\n    state,\n    replace,\n    preview: true,\n    params: location.params,\n  })\n  const linkHrefWithHash = linkHrefWithQuery.split('?')[0]\n  const linkHref = linkHrefWithHash.split('#')[0]\n\n  // Detect if this link is active using the different activeType options\n  let isCurrent\n  if (activeType === 'partial') {\n    isCurrent = startsWith(href, linkHrefWithQuery)\n  } else if (activeType === 'path') {\n    isCurrent = pathname === linkHref\n  } else if (activeType === 'hash') {\n    isCurrent = pathname === linkHrefWithHash\n  } else {\n    isCurrent = href === linkHrefWithQuery\n  }\n\n  // Get the active props\n  const {\n    style: activeStyle = {},\n    className: activeClassName = '',\n    ...activeRest\n  } = isCurrent ? getActiveProps(location) : {}\n\n  // The click handler\n  const handleClick = (e) => {\n    if (onClick) onClick(e)\n\n    if (\n      !e.defaultPrevented && // onClick prevented default\n      e.button === 0 && // ignore everything but left clicks\n      (!target || target === '_self') && // let browser handle \"target=_blank\" etc.\n      !isModifiedEvent(e) // ignore clicks with modifier keys\n    ) {\n      e.preventDefault()\n      // All is well? Navigate!\n      navigate(to, { query, state, replace })\n    }\n  }\n\n  return (\n    <a\n      href={linkHrefWithQuery}\n      target={target}\n      onClick={handleClick}\n      style={{\n        ...style,\n        ...activeStyle,\n      }}\n      className={\n        [className, activeClassName].filter(Boolean).join(' ') || undefined\n      }\n      {...rest}\n      {...activeRest}\n    >\n      {children}\n    </a>\n  )\n}\n"],"names":["getLocation","source","location","state","history","id","createHistory","listeners","transitioning","resolveTransition","_onTransitionComplete","listen","listener","push","popstateListener","action","addEventListener","removeEventListener","filter","fn","_navigate","to","replace","Date","now","replaceState","pushState","e","transition","Promise","resolve","setTimeout","forEach","createMemorySource","initialPathname","index","stack","pathname","search","hash","states","entries","_","href","split","includes","reverse","trimSlashes","str","base","String","startsWith","toSegments","segmentize","baseSegments","concat","join","allSegments","segments","i","l","length","segment","pop","isMatch","path","pathSegments","pathnameSegments","isExact","newBasePath","params","isMatched","every","paramName","trimLeading","string","substring","indexOf","uri","isModifiedEvent","metaKey","altKey","ctrlKey","shiftKey","getResolvedBasepath","basepath","useForceUpdate","React","useState","setCount","mountedRef","useRef","useEffect","current","useCallback","old","context","createContext","isDOM","Boolean","window","document","createElement","globalHistory","LocationRoot","children","userHistory","userBasepath","historyRef","forceUpdate","fullHash","useMemo","JSON","stringify","query","qss","Object","keys","key","parse","err","contextValue","historyListenerRef","LocationProvider","rest","useLocation","useContext","navigateRef","navigate","queryUpdater","stateUpdater","preview","resolvedQuery","resolvedState","val","matchPath","from","_isMatch","Location","render","withLocation","Comp","props","MatchFirst","matchFirstRef","comp","Children","toArray","child","type","__isMatch","cloneElement","miss","exact","__isRedirect","Match","routes","component","locationValue","match","newParams","renderProps","Redirect","useLayoutEffect","Link","onClick","target","style","className","getActiveProps","activeType","link","URL","linkHrefWithQuery","linkHrefWithHash","linkHref","isCurrent","activeStyle","activeClassName","activeRest","handleClick","defaultPrevented","button","preventDefault","undefined"],"mappings":"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"}