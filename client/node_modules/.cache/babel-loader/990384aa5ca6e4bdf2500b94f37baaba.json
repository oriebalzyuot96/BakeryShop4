{"ast":null,"code":"export const ADD_PRODUCT = 'ADD_PRODUCT';\nexport const REMOVE_PRODUCT = 'REMOVE_PRODUCT';\nexport const FETCH_INIT = 'FETCH_INIT';\nexport const FETCH_SUCCESS = 'FETCH_SUCCESS';\nexport const FETCH_FAILURE = 'FETCH_FAILURE';\n\nconst addProductToCart = (product, state) => {\n  const updatedCart = [...state.cart];\n  const updatedItemIndex = updatedCart.findIndex(item => item._id === product._id);\n\n  if (updatedItemIndex < 0) {\n    updatedCart.push({ ...product,\n      quantity: 1\n    });\n  } else {\n    const updatedItem = { ...updatedCart[updatedItemIndex]\n    };\n    updatedItem.quantity++;\n    updatedCart[updatedItemIndex] = updatedItem;\n  }\n\n  return { ...state,\n    cart: updatedCart\n  };\n};\n\nconst removeProductFromCart = (productId, state) => {\n  console.log('Removing product with id: ' + productId);\n  const updatedCart = [...state.cart];\n  const updatedItemIndex = updatedCart.findIndex(item => item._id === productId);\n  const updatedItem = { ...updatedCart[updatedItemIndex]\n  };\n  updatedItem.quantity--;\n\n  if (updatedItem.quantity <= 0) {\n    updatedCart.splice(updatedItemIndex, 1);\n  } else {\n    updatedCart[updatedItemIndex] = updatedItem;\n  }\n\n  return { ...state,\n    cart: updatedCart\n  };\n};\n\nconst fetchProducts = (products, state) => {\n  return { ...state,\n    products\n  };\n};\n\nexport const shopReducer = (state, action) => {\n  switch (action.type) {\n    case FETCH_INIT:\n      return { ...state,\n        isLoading: true,\n        isError: false\n      };\n\n    case FETCH_SUCCESS:\n      // return {\n      //   ...state,\n      //   isLoading: false,\n      //   isError: false,\n      //   products: action.payload,\n      //   fetchProducts\n      // }\n      return fetchProducts(action.products, state);\n\n    case FETCH_FAILURE:\n      return { ...state,\n        isLoading: false,\n        isError: true\n      };\n\n    case ADD_PRODUCT:\n      return addProductToCart(action.product, state);\n\n    case REMOVE_PRODUCT:\n      return removeProductFromCart(action.productId, state);\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["C:/Users/baker/Desktop/BakeryShop4/client/src/context/reducers.js"],"names":["ADD_PRODUCT","REMOVE_PRODUCT","FETCH_INIT","FETCH_SUCCESS","FETCH_FAILURE","addProductToCart","product","state","updatedCart","cart","updatedItemIndex","findIndex","item","_id","push","quantity","updatedItem","removeProductFromCart","productId","console","log","splice","fetchProducts","products","shopReducer","action","type","isLoading","isError"],"mappings":"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","sourcesContent":["export const ADD_PRODUCT = 'ADD_PRODUCT'\nexport const REMOVE_PRODUCT = 'REMOVE_PRODUCT'\nexport const FETCH_INIT = 'FETCH_INIT'\nexport const FETCH_SUCCESS = 'FETCH_SUCCESS'\nexport const FETCH_FAILURE = 'FETCH_FAILURE'\n\nconst addProductToCart = (product, state) => {\n  const updatedCart = [...state.cart]\n  const updatedItemIndex = updatedCart.findIndex(item => item._id === product._id)\n\n  if (updatedItemIndex < 0) {\n    updatedCart.push({ ...product, quantity: 1 })\n  } else {\n    const updatedItem = {\n      ...updatedCart[updatedItemIndex],\n    }\n    updatedItem.quantity++\n    updatedCart[updatedItemIndex] = updatedItem\n  }\n  return { ...state, cart: updatedCart }\n}\n\nconst removeProductFromCart = (productId, state) => {\n  console.log('Removing product with id: ' + productId)\n  const updatedCart = [...state.cart]\n  const updatedItemIndex = updatedCart.findIndex(item => item._id === productId)\n\n  const updatedItem = {\n    ...updatedCart[updatedItemIndex],\n  }\n  updatedItem.quantity--\n  if (updatedItem.quantity <= 0) {\n    updatedCart.splice(updatedItemIndex, 1)\n  } else {\n    updatedCart[updatedItemIndex] = updatedItem\n  }\n  return { ...state, cart: updatedCart }\n}\n\nconst fetchProducts = (products, state) => {\n  return { ...state, products }\n}\n\nexport const shopReducer = (state, action) => {\n  switch (action.type) {\n    case FETCH_INIT:\n      return {\n        ...state,\n        isLoading: true,\n        isError: false,\n      }\n    case FETCH_SUCCESS:\n      // return {\n      //   ...state,\n      //   isLoading: false,\n      //   isError: false,\n      //   products: action.payload,\n      //   fetchProducts\n      // }\n      return fetchProducts(action.products, state)\n    case FETCH_FAILURE:\n      return {\n        ...state,\n        isLoading: false,\n        isError: true,\n      }\n    case ADD_PRODUCT:\n      return addProductToCart(action.product, state)\n    case REMOVE_PRODUCT:\n      return removeProductFromCart(action.productId, state)\n    default:\n      return state\n  }\n}\n"]},"metadata":{},"sourceType":"module"}